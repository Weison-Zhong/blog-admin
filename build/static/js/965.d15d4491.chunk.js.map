{"version":3,"file":"static/js/965.d15d4491.chunk.js","mappings":"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","sources":["components/DeleteModal/index.jsx","components/FormModal/index.jsx","../node_modules/@ant-design/icons-svg/es/asn/PlusCircleOutlined.js","../node_modules/@ant-design/icons/es/icons/PlusCircleOutlined.js","pages/menu-list/index.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { Modal } from \"antd\";\r\nexport default function DeleteModal(props) {\r\n  const { deletingObj, onDelete, setDeletingObj } = props;\r\n  const { id, title, name } = deletingObj;\r\n  return (\r\n    <Modal\r\n      visible={id}\r\n      // confirmLoading={isDeleting}\r\n      closable={false}\r\n      onOk={onDelete}\r\n      onCancel={() => {\r\n        setDeletingObj({});\r\n      }}\r\n    >\r\n      确定要删除: {name || title} 吗?\r\n    </Modal>\r\n  );\r\n}\r\n","import { useEffect, useRef } from \"react\";\r\nimport { Modal, Form, Button } from \"antd\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nconst { Item } = Form;\r\n\r\nexport default function FormModal(props) {\r\n  const form = Form.useForm()[0];\r\n  const formRef = useRef();\r\n  const {\r\n    isShowModal,\r\n    setIsShowModal,\r\n    isSubmitting,\r\n    updatingObj,\r\n    setUpdatingObj,\r\n    title,\r\n    submitBtnCallBack,\r\n    initialValues,\r\n    formConfig,\r\n    children,\r\n  } = props;\r\n  const { width, layout, tailLayout } = formConfig || {};\r\n  const handleModalClose = () => {\r\n    setUpdatingObj({});\r\n    resetFormData();\r\n  };\r\n  const resetFormData = () => form.resetFields();\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      formRef.current && formRef.current.setFieldsValue(updatingObj);\r\n    }, 0);\r\n  });\r\n  return (\r\n    <Modal\r\n      title={(updatingObj.id ? \"修改\" : \"新增\") + title}\r\n      visible={isShowModal}\r\n      footer={null}\r\n      destroyOnClose={true} //可防止Form的initialValues动态更新时延迟问题（读取到的是上次state）\r\n      afterClose={handleModalClose}\r\n      onCancel={() => {\r\n        setIsShowModal(false);\r\n      }}\r\n      width={width}\r\n    >\r\n      <Form\r\n        {...layout}\r\n        form={form}\r\n        ref={formRef}\r\n        initialValues={initialValues}\r\n        onFinish={submitBtnCallBack}\r\n      >\r\n        {children}\r\n        <Item {...tailLayout}>\r\n          <Button\r\n            type=\"primary\"\r\n            htmlType=\"submit\"\r\n            icon={isSubmitting ? <LoadingOutlined /> : null}\r\n          >\r\n            {isSubmitting ? \"提交中\" : \"提交\"}\r\n          </Button>\r\n          <Button\r\n            htmlType=\"button\"\r\n            onClick={resetFormData}\r\n            style={{\r\n              display: \"inline-block\",\r\n              marginLeft: \"10px\",\r\n            }}\r\n          >\r\n            重置所有\r\n          </Button>\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n}\r\n","// This icon file is generated automatically.\nvar PlusCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\" } }] }, \"name\": \"plus-circle\", \"theme\": \"outlined\" };\nexport default PlusCircleOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PlusCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusCircleOutlined = function PlusCircleOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: PlusCircleOutlinedSvg\n  }));\n};\n\nPlusCircleOutlined.displayName = 'PlusCircleOutlined';\nexport default /*#__PURE__*/React.forwardRef(PlusCircleOutlined);","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  getMenusApi,\r\n  addMenuApi,\r\n  updateMenuApi,\r\n  deleteMenuApi,\r\n} from \"@/axios/api\";\r\nimport { Table, Button, Form, Input, message } from \"antd\";\r\nimport {\r\n  PlusCircleOutlined,\r\n  FormOutlined,\r\n  PlusSquareOutlined,\r\n  DeleteOutlined,\r\n} from \"@ant-design/icons\";\r\nimport FormModal from \"@/components/FormModal\";\r\nimport DeleteModal from \"@/components/DeleteModal\";\r\nconst { Item } = Form;\r\n\r\nconst formConfig = {\r\n  width: 500,\r\n  layout: {\r\n    labelCol: { span: 4 },\r\n    wrapperCol: { span: 18 },\r\n  },\r\n  tailLayout: {\r\n    wrapperCol: { offset: 4, span: 18 },\r\n  },\r\n};\r\nconst expandable = {\r\n  defaultExpandAllRows: true,\r\n  expandRowByClick: true,\r\n};\r\nexport default function MenuList() {\r\n  const [menus, setMenus] = useState([]);\r\n  const [isShowModal, setIsShowModal] = useState(false);\r\n  const [deletingMenu, setDeletingMenu] = useState({});\r\n  const [updatingMenu, setUpdatingMenu] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const columns = [\r\n    { title: \"名称\", dataIndex: \"name\", key: \"name\" },\r\n    { title: \"图标\", dataIndex: \"icon\", key: \"icon\" },\r\n    { title: \"路径\", dataIndex: \"key\", key: \"key\" },\r\n    { title: \"组件目录\", dataIndex: \"componentPath\", key: \"componentPath\" },\r\n    {\r\n      title: \"操作\",\r\n      key: \"operation\",\r\n      width: 150,\r\n      align: \"center\",\r\n      render: (row) => {\r\n        const { parentMenuId } = row || {};\r\n        return (\r\n          <div>\r\n            {parentMenuId ? null : (\r\n              <Button\r\n                type=\"primary\"\r\n                icon={<PlusSquareOutlined />}\r\n                onClick={() => handleAddSecondMenuClick(row)}\r\n              />\r\n            )}\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<FormOutlined />}\r\n              onClick={() => handleUpdateMenuClick(row)}\r\n              style={{\r\n                display: \"inline-block\",\r\n                margin: parentMenuId ? \"0 8px 0 40px\" : \"0 8px\",\r\n              }}\r\n            />\r\n            <Button\r\n              type=\"primary\"\r\n              danger\r\n              icon={<DeleteOutlined />}\r\n              onClick={() => handleDeleteMenuClick(row)}\r\n            />\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n  const handleAddSecondMenuClick = (row) => {\r\n    console.log({ row });\r\n    setUpdatingMenu({ parentMenuId: row.id });\r\n    setIsShowModal(true);\r\n  };\r\n  const handleUpdateMenuClick = (row) => {\r\n    setUpdatingMenu(row);\r\n    setIsShowModal(true);\r\n  };\r\n  const handleDeleteMenuClick = async (row) => {\r\n    setDeletingMenu(row);\r\n  };\r\n  const handleDeleteMenu = async () => {\r\n    const { id } = deletingMenu || {};\r\n    if (!id) return message.error(\"参数格式错误，操作失败\");\r\n    const res = await deleteMenuApi(id);\r\n    const { code, msg } = res || {};\r\n    if (code === 200) {\r\n      fetchMenus();\r\n      message.success(msg);\r\n      setDeletingMenu({});\r\n    }\r\n  };\r\n  const fetchMenus = async () => {\r\n    const res = await getMenusApi();\r\n    const { code, data } = res;\r\n    console.log({ res });\r\n    if (code !== 200) return;\r\n    setMenus(data);\r\n  };\r\n  useEffect(() => {\r\n    fetchMenus();\r\n  }, []);\r\n  const handleSubmit = async (data) => {\r\n    setIsSubmitting(true);\r\n    const { id, parentMenuId } = updatingMenu;\r\n    parentMenuId && (data.parentMenuId = parentMenuId);\r\n    let res = null;\r\n    if (id) {\r\n      //修改\r\n      data.id = id;\r\n      res = await updateMenuApi(data);\r\n    } else {\r\n      //新增\r\n      res = await addMenuApi(data);\r\n    }\r\n    setIsSubmitting(false);\r\n    const { code, msg } = res || {};\r\n    if (code === 200) {\r\n      fetchMenus();\r\n      message.success(msg);\r\n      setIsShowModal(false);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <Button\r\n        type=\"primary\"\r\n        icon={<PlusCircleOutlined />}\r\n        onClick={() => {\r\n          setIsShowModal(true);\r\n        }}\r\n      >\r\n        新增一级菜单\r\n      </Button>\r\n      <Table columns={columns} dataSource={menus} expandable={expandable} />\r\n      <FormModal\r\n        isShowModal={isShowModal}\r\n        setIsShowModal={setIsShowModal}\r\n        isSubmitting={isSubmitting}\r\n        formConfig={formConfig}\r\n        title={updatingMenu.parentMenuId ? \"二级菜单\" : \"一级菜单\"}\r\n        updatingObj={updatingMenu}\r\n        setUpdatingObj={setUpdatingMenu}\r\n        submitBtnCallBack={handleSubmit}\r\n      >\r\n        <Item name=\"name\" label=\"菜单名\" rules={[{ required: true }]}>\r\n          <Input allowClear={true} />\r\n        </Item>\r\n        <Item name=\"key\" label=\"路径\" rules={[{ required: true }]}>\r\n          <Input allowClear={true} />\r\n        </Item>\r\n        {updatingMenu.parentMenuId ? (\r\n          <Item\r\n            name=\"componentPath\"\r\n            label=\"组件目录\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <Input allowClear={true} />\r\n          </Item>\r\n        ) : null}\r\n        <Item name=\"icon\" label=\"图标\" rules={[{ required: true }]}>\r\n          <Input allowClear={true} />\r\n        </Item>\r\n        <Item name=\"keepAlive\" label=\"是否缓存\" rules={[{ required: true }]}>\r\n          <Input allowClear={true} />\r\n        </Item>\r\n      </FormModal>\r\n      <DeleteModal\r\n        deletingObj={deletingMenu}\r\n        setDeletingObj={setDeletingMenu}\r\n        onDelete={handleDeleteMenu}\r\n      />\r\n    </>\r\n  );\r\n}\r\n"],"names":["DeleteModal","props","deletingObj","onDelete","setDeletingObj","id","title","name","visible","closable","onOk","onCancel","Item","Form","FormModal","form","formRef","useRef","isShowModal","setIsShowModal","isSubmitting","updatingObj","setUpdatingObj","submitBtnCallBack","initialValues","formConfig","children","width","layout","tailLayout","resetFormData","resetFields","useEffect","setTimeout","current","setFieldsValue","footer","destroyOnClose","afterClose","ref","onFinish","type","htmlType","icon","onClick","style","display","marginLeft","PlusCircleOutlined","React","AntdIcon","_objectSpread","PlusCircleOutlinedSvg","displayName","labelCol","span","wrapperCol","offset","expandable","defaultExpandAllRows","expandRowByClick","MenuList","useState","menus","setMenus","deletingMenu","setDeletingMenu","updatingMenu","setUpdatingMenu","setIsSubmitting","columns","dataIndex","key","align","render","row","parentMenuId","PlusSquareOutlined","handleAddSecondMenuClick","FormOutlined","handleUpdateMenuClick","margin","danger","DeleteOutlined","handleDeleteMenuClick","console","log","handleDeleteMenu","message","deleteMenuApi","res","code","msg","fetchMenus","getMenusApi","data","handleSubmit","updateMenuApi","addMenuApi","dataSource","label","rules","required","allowClear"],"sourceRoot":""}